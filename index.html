<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Gift For You</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Caveat:wght@700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --pink-primary: #ff82a9;
            --pink-hover: #ff6c99;
            /* Tema Biru Laut */
            --ocean-deep: #001220;
            --ocean-light: #004e92;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            margin:0; font-family:'Poppins', sans-serif;
            background-color: var(--ocean-deep);
            /* Gradasi Biru Laut dengan efek partikel air/gelembung */
            background-image: 
                linear-gradient(180deg, var(--ocean-light) 0%, var(--ocean-deep) 100%),
                radial-gradient(circle at 20% 35%, rgba(255, 255, 255, 0.1) 1px, transparent 1px),
                radial-gradient(circle at 75% 44%, rgba(255, 255, 255, 0.1) 2px, transparent 2px),
                radial-gradient(circle at 45% 85%, rgba(255, 255, 255, 0.1) 3px, transparent 3px);
            background-attachment: fixed;
            background-size: cover, 120px 120px, 180px 180px, 250px 250px;

            min-height:100vh; display:flex; justify-content:center; align-items:center;
            overflow-x:hidden; position:relative;
            color: white;
        }

        .fairy-lights {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background-image: url('https://files.catbox.moe/pvhf2s.png');
            background-repeat: repeat-x; background-size: contain;
            z-index: 1000; pointer-events: none;
            filter: drop-shadow(0 0 5px #fff);
        }

        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .page { 
            position:absolute; width:90%; max-width:450px; text-align:center; 
            display: none; opacity: 0; z-index: 10;
        }

        .page.show { 
            display: block;
            animation: slideUpFade 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        h1, h2 { text-shadow: 0 0 10px rgba(0, 198, 255, 0.5); }

        #fallingEnvelope {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            font-size: 50px; cursor: pointer; z-index: 100;
            display: none; transition: top 3s ease-in-out;
            filter: drop-shadow(0 0 15px var(--pink-primary));
        }
        @keyframes sway {
            0%, 100% { transform: translateX(-50%) rotate(-10deg); }
            50% { transform: translateX(-50%) rotate(10deg); }
        }

        /* --- GLASS MODAL --- */
        .modal {
            display: none; position: fixed; z-index: 2000;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 18, 32, 0.9); justify-content: center; align-items: center;
            backdrop-filter: blur(8px);
            opacity: 0; transition: opacity 0.4s ease;
        }
        .modal.open { opacity: 1; }

        .modal-content {
            background: rgba(10, 25, 47, 0.95); padding: 30px; width: 85%; max-width: 400px;
            border-radius: 20px; position: relative; border: 1px solid var(--pink-primary);
            box-shadow: 0 0 30px rgba(0, 198, 255, 0.3);
            transform: scale(0.7); transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .modal.open .modal-content { transform: scale(1); }

        #isiSurat {
            font-family: 'Caveat', cursive;
            font-size: 24px; line-height: 1.4; text-align: left;
            min-height: 180px; color: #fff;
            transition: all 0.4s ease;
        }

        .fade-out { opacity: 0; transform: translateX(-15px); }
        .fade-in { opacity: 1; transform: translateX(0); }

        .heart {
            position: fixed; color: var(--pink-primary); font-size: 20px;
            pointer-events: none; z-index: 999;
            animation: moveUp 4s linear forwards;
            filter: drop-shadow(0 0 5px var(--pink-primary));
        }
        @keyframes moveUp {
            0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .btn {
            padding:12px 25px; background: var(--pink-primary); color:white; border:none; 
            border-radius:50px; font-size:14px; font-weight:600; cursor:pointer; 
            transition:.3s; box-shadow: 0 4px 15px rgba(255,130,169,0.4); margin-top: 15px;
        }
        .btn:hover { transform:scale(1.05); background: var(--pink-hover); box-shadow: 0 0 20px rgba(255,130,169,0.6); }

        /* GLASS CARD */
        .card { 
            background: var(--glass-bg); 
            border-radius:20px; padding:25px; 
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            margin-bottom: 20px;
        }

        .timer-wrapper { margin-top: 20px; display: flex; justify-content: center; gap: 10px; }
        .time-unit { background: var(--glass-bg); padding: 10px; border-radius: 10px; min-width: 55px; border: 1px solid var(--glass-border); }
        .time-unit span { display: block; font-weight: bold; color: var(--pink-primary); font-size: 20px; }
        .time-unit label { font-size: 9px; text-transform: uppercase; color: #ddd; }

        #giftEmoji { font-size:90px; cursor:pointer; margin-bottom: 20px; animation: giftBounce 1.2s ease-in-out infinite; filter: drop-shadow(0 0 10px #fff); }
        @keyframes giftBounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }

        #pageGallery { display: none; width: 100%; max-width: 500px; padding: 80px 20px 40px 20px; box-sizing: border-box; }
        .gallery-list { display: flex; flex-direction: column; gap: 40px; width: 100%; }

        .photo-item { 
            background: var(--glass-bg); padding: 12px; border-radius: 15px;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3); 
            opacity: 0; transform: translateY(60px) scale(0.9);
            transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .photo-item.visible { opacity: 1; transform: translateY(0) scale(1) rotate(-1.5deg); }
        .photo-item:nth-child(even).visible { opacity: 1; transform: translateY(0) scale(1) rotate(1.5deg); }

        .photo-item img { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 10px; }
        .photo-item p { font-family: 'Caveat', cursive; font-size: 22px; margin: 15px 0 5px 0; color: #fff; }

        input, textarea {
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 12px; 
            border: 1px solid var(--glass-border); background: rgba(255,255,255,0.05); 
            color: white; outline: none; transition: 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--pink-primary); background: rgba(255,255,255,0.1); }
    </style>
</head>
<body>

<div class="fairy-lights"></div>
<audio id="birthdaySong" src="https://files.catbox.moe/wsgxyt.mp4" loop></audio>

<div id="fallingEnvelope" onclick="openModal()">‚úâÔ∏è</div>

<div id="suratModal" class="modal">
    <div class="modal-content">
        <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <h3 style="margin:0; color:var(--pink-primary); font-family: 'Poppins', sans-serif; font-size: 14px; text-transform: uppercase;">A Special Letter</h3>
            <span id="pageNumber" style="font-size: 12px; color: #ccc;"></span>
        </div>
        <div id="isiSurat" class="fade-in"></div>
        <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
            <button id="btnPrevSurat" class="btn" style="padding: 8px 15px; font-size: 12px; background: #444;" onclick="changeSuratPage(-1)">Back</button>
            <button id="btnNextSurat" class="btn" style="padding: 8px 15px; font-size: 12px;" onclick="changeSuratPage(1)">Next</button>
            <button id="btnCloseModal" class="btn" style="padding: 8px 15px; font-size: 12px; display:none;" onclick="closeModal()">Selesai ‚ú®</button>
        </div>
    </div>
</div>

<div id="pageLocked" class="page show">
    <img style="width:120px; filter: drop-shadow(1  10px white) invert(1);" src="https://files.catbox.moe/g23me7.png">
    <h1 style="font-family:'Caveat', cursive; font-size: 35px;">Tunggu ya... ‚ù§Ô∏è</h1>
    <div class="timer-wrapper">
        <div class="time-unit"><span id="d">00</span><label>Hari</label></div>
        <div class="time-unit"><span id="h">00</span><label>Jam</label></div>
        <div class="time-unit"><span id="m">00</span><label>Menit</label></div>
        <div class="time-unit"><span id="s">00</span><label>Detik</label></div>
    </div>
</div>

<div id="page1" class="page">
    <img style="width:120px; filter: drop-shadow(0 0 10px white);" src="https://files.catbox.moe/5vh1m1.png">
    <h1>Haii! Sebelum lanjut,<br>isi dulu data diri kamu yaa üå∏</h1>
    <button class="btn" onclick="switchPage('page2')">Gaskeun! üöÄ</button>
</div>

<div id="page2" class="page">
    <div class="card">
        <h1>Kenalan dulu yuk ü§≠</h1>
        <input type="text" id="nama" placeholder="Nama kamu">
        <input type="number" id="umur" placeholder="Umur kamu?">
        <button class="btn" onclick="startSurprise()">Kirim & Lihat Kejutan ~</button>
    </div>
</div>

<div id="page3" class="page">
    <h1>Menyiapkan Kejutan...</h1>
    <div id="timer" style="font-size:60px; font-weight:bold; color:#ff82a9;">3</div>
</div>

<div id="page4" class="page">
    <div id="giftEmoji" onclick="revealCard()">üéÅ</div>
    <h2>Klik kadonya! ‚ú®</h2>
</div>

<div id="page5" class="page">
    <div class="card">
        <h2 id="ucapanText" style="line-height: 1.6; white-space: pre-wrap; font-size: 18px;"></h2>
        <p id="instruction" style="display:none; color:#ddd; font-size:12px;">Eh, ada surat jatuh? Coba di-klik! ‚úâÔ∏è</p>
        <button id="btnGallery" class="btn" style="display:none;" onclick="showGallery()">Lihat Kenangan ‚ú®</button>
    </div>
</div>

<div id="pageGallery">
    <h2 style="color:#ff6c99; font-family:'Caveat', cursive; font-size:40px; text-align:center; margin-bottom: 40px;">Our Memories ‚ù§Ô∏è</h2>
    <div class="gallery-list">
        <div class="photo-item"><img src="https://files.catbox.moe/wfyphd.png"><p>Foto berdua kita yang paling romantis</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/na59r1.png"><p>Gendong orang terlucu</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/ezpsil.png"><p>Momen kita main konon</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/2o84c5.png"><p>Awal-awal kita naik gunung</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/m4gjt7.png"><p>Makasih udah mau nolongin terus</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/62rvez.png"><p>Semoga begini terus ya</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/s04vxf.png"><p>Lucunya kamu pas lagi main</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/kuv421.png"><p>Sehat selalu ya kamu</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/g23me7.png"><p>Imut banget!</p></div>
        <div class="photo-item"><img src="https://files.catbox.moe/slczyl.png"><p>Foto pertama bareng teman</p></div>
    </div>
    <div style="text-align: center; margin: 50px 0;">
        <button class="btn" onclick="showFinalMessage()">Tulis Pesan untukku ‚ú®</button>
    </div>
</div>

<div id="pageFinal" class="page">
    <div class="card">
        <h2>Kirim Pesan üéâ</h2>
        <textarea id="pesanWA" placeholder="Tulis harapan atau pesanmu..."></textarea>
        <button class="btn" onclick="switchPage('pageThanks')">Selanjutnya ‚ú®</button>
    </div>
</div>

<div id="pageThanks" class="page">
    <div class="card">
        <h2 style="font-family:'Caveat', cursive; font-size: 30px;">Makasih sudah ngisi yah! ‚ù§Ô∏è</h2>
        <button class="btn" style="background: #25d366;" onclick="kirimKeWA()">Kirim ke WhatsApp üì±</button>
    </div>
</div>

<script>
const targetDate = new Date("Jan 7, 2026 00:00:00").getTime();
let userNama = "";
let userUmur = "";
const nomorWA = "6281264247474"; 
let heartInterval;
let currentSuratPage = 0;
let isiHalamanSurat = [];

// Countdown Timer Logic
const intervalTimer = setInterval(function() {
    const now = new Date().getTime();
    const distance = targetDate - now;
    document.getElementById("d").innerHTML = Math.max(0, Math.floor(distance / (1000 * 60 * 60 * 24)));
    document.getElementById("h").innerHTML = Math.max(0, Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
    document.getElementById("m").innerHTML = Math.max(0, Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)));
    document.getElementById("s").innerHTML = Math.max(0, Math.floor((distance % (1000 * 60)) / 1000));
    if (distance <= 0) {
        clearInterval(intervalTimer);
        if(document.getElementById('pageLocked').classList.contains('show')) switchPage('page1');
    }
}, 1000);

function switchPage(id){
    const current = document.querySelector('.page.show');
    const next = document.getElementById(id);
    if(current){
        current.style.opacity = '0';
        setTimeout(() => {
            current.classList.remove('show');
            current.style.display = 'none';
            next.style.display = 'block';
            setTimeout(() => next.classList.add('show'), 50);
        }, 400);
    } else {
        next.style.display = 'block';
        next.classList.add('show');
    }
}

function startSurprise(){
    userNama = document.getElementById('nama').value || "Sayang";
    userUmur = document.getElementById('umur').value || "Spesial";
    switchPage('page3');
    let time = 3;
    const countdown = setInterval(() => {
        time--;
        document.getElementById('timer').textContent = time;
        if(time <= 0){ clearInterval(countdown); switchPage('page4'); }
    }, 1000);
}

function revealCard(){
    document.getElementById('birthdaySong').play();
    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
    switchPage('page5');
    const text = `Happy Birthday, ${userNama}! üéâ\n\nGak terasa sekarang udah ${userUmur} tahun aja... ‚ù§Ô∏è`;
    let i = 0;
    const container = document.getElementById('ucapanText');
    function typeWriter() {
        if (i < text.length) {
            container.innerHTML += text.charAt(i).replace(/\n/g, '<br>');
            i++;
            setTimeout(typeWriter, 50);
        } else {
            dropEnvelope();
        }
    }
    setTimeout(typeWriter, 1000);
}

function dropEnvelope() {
    const env = document.getElementById('fallingEnvelope');
    env.style.display = 'block';
    setTimeout(() => {
        env.style.top = '70%'; 
        env.style.animation = 'sway 2s ease-in-out infinite';
        document.getElementById('instruction').style.display = 'block';
    }, 100);
}

function openModal() {
    isiHalamanSurat = [
        `Hai ${userNama}, ini surat rahasia buat kamu. Aku cuma mau bilang kalau aku beruntung banget bisa kenal kamu, ketawa bareng,nobar bareng, mabar bareng pokoknya semua lahh rasanya pengen sama kamu selamanyaaa`,
        `Banyak momen yang udah kita lewati bareng. Kamu selalu bisa bikin hari-hariku lebih berwarna, dan aku minta maaf yah kalo aku kadang bikin kamu ngambek atau marahhh, maafin yah.`,
        `Di umur yang ke-${userUmur} ini, aku berharap kamu selalu sehat, makin dewasa, dan tetap jadi orang yang ceria, bahagia selalu`,
        `Semoga semua cita-citamu tercapai. Sekali lagi, Happy Birthday dan kalo kita terpisah karena suatu alasan semoga kamu bisa ketemu yang lebih baik dari pada ku, tapi ku harap kita bersama selamanya Love you mbull! ‚ù§Ô∏è`
    ];
    currentSuratPage = 0;
    updateSuratContent();
    const modal = document.getElementById('suratModal');
    modal.style.display = 'flex';
    setTimeout(() => modal.classList.add('open'), 10);
    document.getElementById('fallingEnvelope').style.display = 'none';
    document.getElementById('instruction').style.display = 'none';
}

function updateSuratContent() {
    const isi = document.getElementById('isiSurat');
    const pNum = document.getElementById('pageNumber');
    const btnNext = document.getElementById('btnNextSurat');
    const btnPrev = document.getElementById('btnPrevSurat');
    const btnClose = document.getElementById('btnCloseModal');

    isi.classList.remove('fade-in');
    isi.classList.add('fade-out');

    setTimeout(() => {
        isi.innerHTML = isiHalamanSurat[currentSuratPage];
        pNum.innerText = `${currentSuratPage + 1} / 4`;
        isi.classList.remove('fade-out');
        isi.classList.add('fade-in');
        btnPrev.style.visibility = (currentSuratPage === 0) ? 'hidden' : 'visible';
        if (currentSuratPage === isiHalamanSurat.length - 1) {
            btnNext.style.display = 'none';
            btnClose.style.display = 'inline-block';
        } else {
            btnNext.style.display = 'inline-block';
            btnClose.style.display = 'none';
        }
    }, 300);
}

function changeSuratPage(step) {
    currentSuratPage += step;
    updateSuratContent();
}

function closeModal() {
    const modal = document.getElementById('suratModal');
    modal.classList.remove('open');
    setTimeout(() => {
        modal.style.display = 'none';
        document.getElementById('btnGallery').style.display = 'inline-block';
    }, 400);
}

function showGallery(){
    document.querySelectorAll('.page').forEach(p => { p.classList.remove('show'); p.style.display = 'none'; });
    const gallery = document.getElementById('pageGallery');
    gallery.style.display = 'block';
    document.body.style.overflowY = 'auto';
    heartInterval = setInterval(() => {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.innerHTML = '‚ù§Ô∏è';
        heart.style.left = Math.random() * 100 + 'vw';
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 4000);
    }, 400);

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) entry.target.classList.add('visible');
        });
    }, { threshold: 0.15 });
    document.querySelectorAll('.photo-item').forEach(item => observer.observe(item));
}

function showFinalMessage(){
    clearInterval(heartInterval);
    document.getElementById('pageGallery').style.display = 'none';
    document.body.style.overflowY = 'hidden';
    switchPage('pageFinal');
}

function kirimKeWA(){
    const pesan = document.getElementById('pesanWA').value;
    const teksWA = `Halo! Aku ${userNama}.%0A%0AIni pesan dariku:%0A"${pesan}"`;
    window.open(`https://wa.me/${nomorWA}?text=${teksWA}`, '_blank');
}
</script>
</body>
</html>
